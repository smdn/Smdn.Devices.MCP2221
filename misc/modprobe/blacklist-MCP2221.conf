# SPDX-FileCopyrightText: 2026 smdn <smdn@smdn.jp>
# SPDX-License-Identifier: MIT
#
#
#           blacklist.conf for MCP2221/MCP2221A
#
#
# Since Ubuntu 24.04 (Kernel 6.8+), the 'hid_mcp2221' driver automatically
# binds to the MCP2221/MCP2221A device to provide native I2C/GPIO kernel support.
# While beneficial for kernel-space I2C, this dedicated driver "hides" the
# raw HID interface, preventing the creation of /dev/hidraw* nodes.
#
# By blacklisting 'hid_mcp2221', the system falls back to the generic
# 'usbhid' driver, ensuring /dev/hidraw* device files are generated for
# use with user-space libraries (e.g., hidapi, libmcp2221).
#
# How to enable:
#   1. Copy this file to /etc/modprobe.d/
#   2. Update initramfs to apply changes at boot: `sudo update-initramfs -u`
#   3. Reboot the system.
#
# How to revert:
#   1. Delete this file from /etc/modprobe.d/
#   2. Update initramfs: `sudo update-initramfs -u`
#   3. Reboot. The 'hid_mcp2221' driver will resume control.

blacklist hid_mcp2221
